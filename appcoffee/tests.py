from django.test import TestCase
from db_pool import pool
# Create your tests here.
def test_query():
    try:
        conn = pool.connection()  # 從 pool 取一條連線
        cursor = conn.cursor(dictionary=True)
        cursor.execute("SELECT * FROM transaction")  # 替換成你的資料表
        results = cursor.fetchall()
        for row in results:
            print(row)
        cursor.close()
        conn.close()  # 注意這裡只是釋放連線回 pool，不是真的關閉
    except Exception as e:
        print(f"資料庫錯誤: {e}")

def insert_data(dict_data):
    print(len(dict_data))
    try:
        conn = pool.connection()  # 從 pool 取一條連線
        cursor = conn.cursor()
        # sql = "INSERT INTO transaction (transactionID, stock) VALUES (%s, %s)"
        # data = ("123456", 10)
        # cursor.execute(sql, data)
        # conn.commit()  # 提交事務
        # cursor.close()
        sql = "update product set description = %s where name = %s"
        for key, value in dict_data.items():
            cursor.execute(sql, (value, key))
            conn.commit()
            result = cursor.fetchone()
            if result:
                print(f"Product {key} already exists in the database.")

            else:
                print("Inserting new product into the database.")
        conn.close()  # 注意這裡只是釋放連線回 pool，不是真的關閉
    except Exception as e:
        print(f"資料庫錯誤: {e}")

if __name__ == "__main__":
    data = [
            '大美式4杯144元', '每天一杯剛剛好，順口不苦澀，讓早晨多點精神與儀式感。'
            ,'大特濃美式4杯176元', '濃郁升級，卻不刺舌。專注時的最佳夥伴。'
            ,'特大美式4杯192元', '份量十足，風味穩定。重度咖啡控的日常首選。'
            ,'80元咖啡飲品4杯256元', '多款人氣風味，一次擁有。偶爾換口味很過癮。'
            ,'氣泡美式6杯449元', '氣泡清爽，咖啡香氣濃郁。午後解膩好選擇。'
            ,'特大美式8杯449元', '續航力滿分，冰箱備著隨時喝。提神不求人。'
            ,'大美式20杯988元', '咖啡控必備，整月安心喝。省時省錢好幫手。'
            ,'大拿鐵4杯176元', '奶香與咖啡完美交織，柔順好喝，放鬆心情必備。'
            ,'60元咖啡飲品4杯192元', '經典口味齊聚，慢慢喝，細細品味。'
            ,'65元咖啡飲品4杯208元', '人氣精選，質感滿分。日常飲用也有小確幸。'
            ,'大特濃拿鐵4杯208元', '濃厚奶香，層次豐富。忙碌時的暖心選擇。'
            ,'特大拿鐵4杯224元', '大杯份量，香醇滑順，每口都是享受。'
            ,'特大拿鐵7杯449元', '持續滿足你對拿鐵的渴望，分享也適合。'
            ,'大拿鐵15杯988元', '超值大包裝，家中辦公都方便，奶香依舊純粹。'
            ,'79元咖啡飲品4杯253元', '多款人氣款，隨心挑選，喝出多變日常。'
            ,'珍奶系列6杯449元', '濃郁茶香搭配Q彈珍珠，每口都是幸福感。'
            ,'光泉鮮乳指定系列2件54元', '鮮乳新鮮直送，純淨自然，日常必備。'
            ,'林鳳營鮮乳20件1499元', '大包裝省荷包，品質穩定，奶香濃郁。'
            ,'萬丹鮮乳936ml6件500元', '大容量組合，滿足全家需求，鮮甜又健康。'
            ,'瑞穗調味乳指定系列2件69元', '多種口味，調味適中，喝出幸福滋味。'
            ,'光泉調味乳指定系列8件168元', '甜而不膩，適合喜歡小確幸的你。'
            ,'光泉豆米漿20件320元', '天然豆米香，健康又美味，早晨好夥伴。'
            ,'咖啡廣場指定系列2件49元', '平價好喝，隨時隨地的咖啡小確幸。'
            ,'茶裏王600ml2件35元', '經典茶飲，解渴又消暑，回味無窮。'
            ,'麥香奶茶指定系列2件47元', '濃濃麥香，滑順奶味，午後必備飲品。'
            ,'樂法茶飲指定系列2件39元', '清新茶韻，簡單又好喝，日常首選。'
            ,'黑松沙士指定系列2件49元', '經典爽口，解膩又提神，老少咸宜。'
            ,'御茶園無糖麥茶2件39元', '無糖清爽，健康飲品的好選擇。'
            ,'YOI鹼性水10件200元', '健康水質，補水不負擔，運動後也適合。'
            ,'樂法茶飲指定系列10件175元', '大包裝超值，茶香持久，家中常備。'
            ,'原萃玉露綠茶10件195元', '純淨茶韻，清新回甘，喝出自然好味道。'
            ,'伯朗EX咖啡10件210元', '濃郁醇厚，口感圓潤，咖啡愛好者的首選。'
            ,'飲冰室茶集指定系列2件40元', '懷舊茶飲，經典滋味回憶滿滿。'
            ,'樂法職人奶茶8件200元', '濃郁奶香搭配香醇茶底，幸福感爆棚。'
            ,'噶瑪蘭麥汁8件140元', '香濃麥香，暖心又滋補，適合各時段享用。'
            ,'茶葉蛋10顆88元', '入味十足，鹹香濃郁，宵夜必備。'
            ,'18C蘋果5顆120元', '新鮮甜脆，每一口都充滿自然果香。'
            ,'木瓜切盤2件110元', '清甜多汁，簡單又健康的好選擇。'
            ,'三角飯糰10件300元', '飽足又方便，早餐首選，隨時帶著走。'
            ,'特重涼麵指定系列3件189元', '清爽開胃，口味獨特，夏日解膩首選。'
            ,'超值便當指定系列3件210元', '份量足，口味多樣，營養均衡好選擇。'
            ,'精選便當指定系列3件240元', '嚴選食材，口感更豐富，享受每一口。'
            ,'活力餐盒指定系列3件270元', '營養滿分，活力加倍，忙碌時的能量補給。'
            ,'三明治指定系列4件180元', '輕食首選，鮮嫩美味，簡單享受。'
            ,'包子32元系列5件120元', '皮Q餡飽滿，經典台式美味，不容錯過。'
            ,'大玉成38元系列6顆160元', '口感紮實，香氣濃郁，小點心好選擇。'
            ,'熟水餃煎餃6件270元', '皮薄餡鮮，香氣撲鼻，餐桌必備。'
            ,'自然零指定系列6件120元', '天然健康，口感純粹，安心選擇。'
            ,'光泉晶典指定系列6件96元', '鮮奶品質佳，營養美味，家人放心。'
            ,'炸物指定系列3件129元', '酥脆多汁，香氣十足，讓人一口接一口。'
            ,'鹹水雞鴨賞6件282元', '鹹香夠味，肉質鮮嫩，下酒好菜。'
            ,'雞胸肉59元系列6件300元', '高蛋白低脂，健康又美味，健身必備。'
            ,'超能蛋白指定系列6件174元', '營養豐富，補充蛋白質的好幫手。'
            ,'鮮蝦茶碗蒸6件198元', '滑嫩鮮甜，口感細膩，令人回味。'
            ,'統一AB優格4件120元', '酸甜適中，活力滿分的健康零食。'
            ,'植物的優指定系列6件162元', '植物基底，清爽健康，適合輕食愛好者。'
            ,'究餡系列5件160元', '餡料飽滿，每一口都是驚喜。'
            ,'夾心吐司32元系列4件100元', '軟嫩吐司夾入濃郁內餡，完美搭配。'
            ,'麵包35元系列5件140元', '香氣四溢，口感豐富，早餐好選擇。'
            ,'麵包蛋糕30元系列5件120元', '甜而不膩，午後茶點心的最佳夥伴。'
            ,'點心28元系列5件110元', '多樣選擇，口味多變，滿足不同味蕾。'
            ,'夾心麵包系列5件115元', '內餡香濃，外皮酥軟，好吃停不下來。'
            ,'手打麵指定系列6件157元', '口感Q彈，湯頭鮮美，暖心又滿足。'
            ,'隨緣杯麵指定系列6件135元', '快速方便，美味不打折，隨時充飢。'
            ,'華元洋芋片指定系列5件140元', '香脆爽口，經典零嘴，回味無窮。'
            ,'新貴派大格酥4件116元', '層層酥脆，甜而不膩，下午茶好選擇。'
            ,'蝦乖乖10件250元', '香脆鮮蝦味，童年回憶，零嘴首選。'
            ,'梅李果坊指定系列2件65元', '酸甜梅李，清爽解膩，隨時補充元氣。'
            ,'萬歲牌110元系列2件176元', '經典口味，濃郁香氣，回味無窮。'
            ,'可樂果指定系列10件260元', '辣味十足，脆香爽口，休閒必備。'
            ,'77乳加星球巧克力2件49元', '甜蜜巧克力，療癒每一刻。'
            ,'77乳加指定系列4件60元', '小巧美味，隨時解饞。'
            ,'森永指定系列3件36元', '經典日系風味，香甜可口。'
            ,'加倍佳壁虎軟糖2件59元', 'Q彈有趣，童趣滿滿。'
            ,'杜老爺藍莓甜筒4件90元', '清新藍莓，甜而不膩，夏日涼感首選。'
            ,'曠世草莓雪糕4件98元', '香濃草莓，冰涼爽口，甜蜜解暑。'
            ,'杜老爺雪糕指定系列4件76元', '多款口味，經典冰品，炎夏最愛。'
            ,'皇家甜筒指定系列4件144元', '尊貴享受，濃郁奶香，冰涼入心。'
            ,'百吉雪糕10件240元', '經濟實惠，多樣口味，家庭分享好選擇。'
            ,'遠東泡泡冰4件120元', '冰涼透心，甜而不膩，消暑必備。'
            ,'阿奇儂濃脆雪糕10件320元', '酥脆口感，香甜誘人，停不了口。'
            ,'冷凍小點45元系列2件79元', '小巧美味，解饞小點心。'
            ,'冷凍小點49元系列2件86元', '多樣口味，方便快速，隨時享用。'
            ,'舒潔袖珍面紙10件75元', '細緻柔軟，方便攜帶，生活好幫手。'
            ,'舒潔抗菌濕巾10件145元', '抗菌防護，清潔安心，守護健康。'
            ,'沙威隆濕巾10件145元', '溫和清潔，隨身必備，乾淨又安心。'
            ,'絲花濕巾10件245元', '超強吸水，呵護肌膚，家庭必備。'
            ,'威德清涼果凍6件189元', '清涼消暑，果味濃郁，夏日解膩神器。'
            ,'白蘭氏雞精5件195元', '滋補強身，提升元氣，工作好幫手。'
            ,'絲嵐衛生紙3串1080元', '柔軟親膚，量大實惠，家庭必備。'
            ,'OLISE洗沐系列4件500元', '天然配方，溫和潔淨，呵護全家肌膚。'
            ,'貓皇族大罐指定系列4件99元', '貓咪專屬，營養豐富，毛孩健康守護神。'
            ,'十全iOiO蒟蒻4件96元', 'Q彈爽口，低熱量，健康小零嘴。']
    dict_data = {}
    for i in range(0, len(data), 2):
        dict_data[data[i]] = data[i + 1]
    print(len(dict_data))
    # test_query()